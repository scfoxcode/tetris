<!DOCTYPE html>
<html>
<head>
    <title>Tetris</title>
    <script type="text/javascript" src="tetris.js"></script>
</head>
<body>
    <audio controls autoplay loop style="display:none">
        <source src="tetris.ogg" type="audio/ogg">
    </audio>
    <canvas id="myCanvas" width="400" height="560" style="border:1px black solid"/>
</body>
<script>
    window.onload = function()
    {
        var runGame = function()
        {
            var game = new Tetris("myCanvas");
            game.init(40, {x:10, y:14});
            game.run();
        };

        var images = ["blue.png", "green.png", "lightBlue.png", "orange.png", "purple.png", "red.png", "yellow.png"];
        var loaded = 0;
        images.forEach(function(element)
        {
            var image = new Image();
            image.src = element;
            image.onload = function()
            {
                loaded++;
                if(loaded == images.length)
                {
                    runGame();
                }
            };
        });
    };
</script>
</html>
