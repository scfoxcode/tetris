<!DOCTYPE html>
<html>
<head>
    <title>Tetris</title>
    <link rel="stylesheet" type="text/css" href="tetris.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <script type="text/javascript" src="tetris.js"></script>
</head>
<body>
    <audio id="music" controls autoplay loop style="display:none">
        <source src="tetris.ogg" type="audio/ogg">
    </audio>
    <div id="gameContainer">
        <div id="topGame" width="400" height ="64">
            <div id="topLeft"></div
            ><div id="topMiddle"></div
            ><div id="topRight"></div>
        </div>
        <canvas id="myCanvas" width="400" height="560"/>
    </div>

</body>
<script>
    window.onload = function()
    {
        var runGame = function()
        {
            var game = new Tetris("myCanvas");
            game.init(40, {x:10, y:14});
            game.run();
        };

        var images = ["blue.png", "green.png", "lightBlue.png", "orange.png", "purple.png", "red.png", "yellow.png"];
        var loaded = 0;
        images.forEach(function(element)
        {
            var image = new Image();
            image.src = element;
            image.onload = function()
            {
                loaded++;
                if(loaded == images.length)
                {
                    runGame();
                }
            };
        });
    };
</script>
</html>
